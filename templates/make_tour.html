= extends "layout.html"

= block title
	Choose Locations
= endblock

= block head
	{{ helpers.asset_tag("make_tour.css") }}
= endblock

= block body

	<script>
		var numLocs = {{ locLen }};
		var locs = {{ locs | tojson | safe }}
	</script>

	{{ helpers.asset_tag("make_tour.js") }}

	<h2 style="padding-top: 10px;">Select where you would like to stop during your tour (up to 3)</h2>

	= if locs

			= for loc in locs

				<div class="dialog myDiv{{ loc["counter"] }}">
					<div class="top-left">
						<h1>{{ loc["name"] }}</h1>
						<h3>{{ loc["address"] }}</h3>

						<span class="rating">
							<span>{{ loc["rating"] }}</span> / 5
						</span>

						<div class="contact-info">
							<p>{{ loc["phone_number"] }}</p>
							<p><a href="{{ loc["website"] }}">{{ loc["website"] }}</a></p>
						</div>
					</div>

					<div class="top-right">
						<img src="{{ loc["photo_url"] }}">
					</div>

					<div class="foursquare-info">
						Total Checkins: <span>{{ loc["checkins"] }}</span>
						// People here now: <span>{{ loc["here"] }}</span>
					</div>

					<div class="reviews">
						<h1> Reviews </h1>

						= for review in loc["reviews"][:3]
							<div class="review">

								<p class="review-text">
									<span>{{ review["rating"] }}</span> / 5
									{{ review["text"] | truncate (110) }}

								</p>
								<p class="author">
									{{ review["author_name"] }}
								</p>
							</div><br>
						= endfor

					</div>

					<div class="footer">
						<button id="select">
							Select
						</button><button id="cancel">
							Cancel
						</button>
					</div>
				</div>

			= endfor

		<form class="locations-form" method="POST">
			= for loc in locs
			<div id="myDiv{{ loc["counter"] }}" class="location-container">
					<div class="force-height"></div>
					<div class="location-content">
						<div class="circular"
							style="background: url({{ loc["photo_url"]}}) no-repeat; background-size: 200px 200px;">
							<!--<img src="{{ loc["photo_url"] }}">-->
						</div>
						<label class="location", id = "myLoc{{loc["counter"]}}">
							<h2>{{ loc["name"] }}</h2>
							<p>{{ loc["address"] }}</p>
							<p>Rating: {{ loc["rating"] }}</p>
							<input type="checkbox" name="place" value="{{ loc["address"] }}"
								id = "myChk{{loc["counter"]}}" class = "chkbox">
						</label>
					</div>
				</div>
			= endfor

			<input type="submit" class="button" value="Submit" name="button" />
		</form>

	= else

		<p style="padding: 5px 0 10px;"> No locations found.</p>

	= endif

= endblock
